---
title: "An Analysis of Shootings and Firearm Discharges in Toronto"
subtitle: "My subtitle if needed"
author: Jin Zhang
thanks: "Code and data are available at: https://github.com/KrystalJin1/Shootings-Firearm-Discharges-Research.git"
date: September 24, 2024
date-format: long
abstract: "In this paper, we study the shootings and firearm incidents that were reported in Toronto from 2018 to 2023. Our research shows important patterns over time and across different neighborhoods, highlighting places and seasons with higher risk of shootings. The data suggests there may be a connection between the number of incidents and the economic situation in different areas of the city. The aim of this report is to give the Toronto Police Service detailed information that can help improve policing and safety in specific locations and during certain times."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(modelsummary)
```


# Introduction

You can and should cross-reference sections and sub-sections. We use @citeR to analyze and @rohan.

The remainder of this paper is structured as follows. in @sec-data we explain where the data comes from and the background around it. Then, we show our results by using graphs and tables to present the data. Finally, we talk about what these findings mean, suggest ideas for future studies, and give a conclusion.


Shootings and firearm discharges are becoming a bigger problem in Toronto, especially in the city's urban areas. It is very important for policymakers, the police, and the community to understand the reasons behind these incidents. By looking at the data on these events, we can find patterns that may help in creating better strategies to reduce gun violence.

In this study, we look at incidents reported from 2018 to 2023. Our goal is to find trends over time and in different places to see which neighborhoods and periods are more dangerous. This paper also tries to explore if there is a connection between time factors  and the rise in gun-related incidents in Toronto.



# Data {#sec-data}

Some of our data is about shootings and injuries in Toronto (@fig-deaths-injuries), 
sourced from @opendatatoronto

```{r}
#| label: fig-deaths-injuries
#| fig-cap: Distribution of Deaths and Injuries by Time Range
#| echo: false

download_data <- read_csv(here::here("data","raw_data","Shootings_data.csv"))

# Ensure that the DEATH and INJURIES columns are of numeric and then calculate the total number of people
download_data <- download_data %>%
  mutate(
    DEATH = as.numeric(DEATH),    
    INJURIES = as.numeric(INJURIES),
    total_people = ifelse(is.na(DEATH), 0, DEATH) + ifelse(is.na(INJURIES), 0, INJURIES)  
  )


# Plot Bar chart to show the total number of accidents in different time 
ggplot(download_data, aes(x = OCC_TIME_RANGE, y = total_people, fill = OCC_TIME_RANGE)) + 
  geom_bar(stat = "identity",alpha = 1) + 
  scale_fill_manual(values = c("darkgrey", "bisque3", "darkslategray3", "lightpink3")) +
  labs(title = "Total Number of Deaths and Injuries by Time Range", 
       x = "Time Range", y = "Total Number of People Involved") + 
  theme_minimal()
```
```{r}
#| label: fig-deaths-injuries2
#| fig-cap: Distribution of Deaths and Injuries by Time Range
#| echo: false


yearly_data <- download_data %>%
  group_by(OCC_YEAR) %>%
  summarise(total_people = sum(total_people, na.rm = TRUE))

ggplot(yearly_data, aes(x = OCC_YEAR, y = total_people)) + 
  geom_line(color = "steelblue", size = 1) + 
  geom_point(color = "steelblue", size = 2) + 
  labs(title = "Total Number of Deaths and Injuries by Year", 
       x = "Year", y = "Total Number of People Involved") + 
  theme_minimal()
```

Talk more about it.

We show more details using visualizations. For example, in the graph (@fig-deaths-injuries), different colors are used to represent the total number of deaths and injuries during various time periods. This makes it easier to see the trend clearly.


```{r}
#| label: Summary table of the shooting data
#| fig-cap: Summary table of the shooting data
#| echo: false

summary_table <- download_data %>%
  select( DEATH, INJURIES, OCC_HOUR) %>%
  rename(
    `Number of Deaths` = DEATH,
    `Number of Injuries` = INJURIES,
    `Hour of Occurrence` = OCC_HOUR
  ) %>%
  datasummary_skim(histogram = FALSE) 

summary_table
```

Talk way more about it. 


\newpage


# References


